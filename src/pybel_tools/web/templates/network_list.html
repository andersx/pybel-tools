{% extends "bootstrap/base.html" %}

{% import "bootstrap/wtf.html" as wtf %}
{% import "bootstrap/fixes.html" as fixes %}
{% import "bootstrap/utils.html" as util %}

{% block title %}Networks{% endblock %}

{% block styles %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href='https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css'/>
    <link rel="stylesheet" type="text/css"
          href='https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css'/>

{% endblock %}

{% block head %}
    {{ super() }}
    {{ fixes.ie8() }}

    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
    <script type="text/javascript"
            src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.full.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script type="text/javascript"
            src="{{ url_for('static', filename='js/home_controller/home_controller.js') }}"></script>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="page-header">
            <h1>PyBEL Web</h1>
        </div>
        <div class="panel panel-default">
            <div class="panel-body">
                <p>This web application provides an interface for users to interact with the functions in the Python
                    software packages: <a href="http://pybel.readthedocs.io/">PyBEL</a> and <a
                            href="http://pybel-tools.readthedocs.io/">PyBEL Tools</a>. From this page, you can begin to
                    explore the networks stored in the knowledge base stratified by the source BEL script,
                    by nodes and other biological entities of interest, or by certain authors and publications of
                    interest.
                </p>

                <p>It is maintained by <a href="https://github.com/cthoyt">Charles Tapley Hoyt</a> and Daniel
                    Domingo-Fernandez at the <a
                            href="https://www.scai.fraunhofer.de/en/business-research-areas/bioinformatics.html">Fraunhofer
                        SCAI Department of Bioinformatics</a> with support from the <a
                            href="https://www.imi.europa.eu/">IMI</a> projects, <a href="http://www.aetionomy.eu/>">AETIONOMY</a>
                    and <a href="http://www.phago.eu/">PHAGO</a>.
                </p>

                <h4>Actions</h4>
                <a class="btn btn-default" href="{{ url_for('view_compile') }}"
                   role="button">Compile a BEL Script</a>
                <a class="btn btn-default" href="{{ url_for('view_upload') }}"
                   role="button">Upload a Pre-compiled Pickle</a>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Curated Networks</h3>
            </div>
            <div class="panel-body">
                <p>Each curated network is backed by a BEL script. Below are options to summarize the networks'
                    contents, explore them with an in-browser navigator, or run analyses with data sets such as
                    differential gene expression data.</p>
            </div>
            <div class="list-group">
                {% for nid, name, vers, descr in data %}
                    <div class="list-group-item">
                        <h4 class="list-group-item-heading">{{ name }}
                            <small class="text-muted">{{ vers }}</small>
                        </h4>
                        <div class="list-group-item-text">
                            <p>{{ descr }}</p>
                            <ul class="list-inline">
                                <li><a href="/summary/{{ nid }}">Summarize</a></li>
                                <li><a href="/explore/?graphid={{ nid }}">Explore</a></li>
                                {% if analysis_enabled %}
                                    <li><a href="/analysis/upload/{{ nid }}">Analyze</a></li>
                                    <li><a href="/analysis/{{ nid }}">Results</a></li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Network Seeding by Nodes</h3>
            </div>
            <div class="panel-body">
                <p>This method of seeding will acquire the given nodes and expand around them using given seed
                    method.
                </p>
                <p><strong>Use Case:</strong> The leukemia drug, <a
                        href="https://www.ebi.ac.uk/chembl/compound/inspect/CHEMBL255863">nilotinib</a>, triggers cells
                    to get rid of faulty components - including the ones associated with several brain diseases. In
                    2015, Georgetown University Medical Center <a
                            href="http://content.iospress.com/articles/journal-of-parkinsons-disease/jpd160867">published</a>
                    findings that the drug had a helpful effect on patients in
                    Alzheimer's and Parkinson's diseases. Though it is currently unknown, a search of the paths between
                    this drug and these diseases could provide insight to nilotinib's mechanism of action.</p>
                <form class="form-horizontal">
                    <div class="form-group form-horizontal">
                        <label class="col-md-2 control-label">Nodes</label>
                        <div class="col-md-10">
                            <select style="width: 100%" multiple="multiple"
                                    id="node_selection"></select>
                        </div>
                    </div>
                </form>

                {{ wtf.quick_form(subgraph_form, id='subgraph_form', form_type='horizontal', button_map={'submit_button': 'btn btn-primary'}) }}
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Network Seeding by Provenance</h3>
            </div>
            <div class="panel-body">
                <p>This method of seeding will acquire nodes and edges asserted in the given citations and by the given
                    authors, then expand around the neighborhood of these nodes to show all peripheral knowledge.</p>
                <p><strong>Use Case:</strong> Users may be interested in the representation of their own work, their
                    colleagues' work, and their favorite publications in the knowledge assembly. For users that are new
                    to a given field, this is an excellent research tool to identify what papers to read next.</p>
                <form class="form-horizontal">
                    <div class="form-group form-horizontal">
                        <label class="col-md-2 control-label">PubMed Identifiers</label>
                        <div class="col-md-10">
                            <select style="width: 100%" multiple="multiple" id="pubmed_selection"></select>
                        </div>
                    </div>
                    <div class="form-group form-horizontal">
                        <label class="col-md-2 control-label">Authors</label>
                        <div class="col-md-10">
                            <select style="width: 100%;" multiple="multiple" id="author_selection"></select>
                        </div>
                    </div>
                </form>
                {{ wtf.quick_form(provenance_form, id='provenance_form', form_type='horizontal', button_map={'submit_button': 'btn btn-primary'}) }}
            </div>
        </div>
    </div>
{% endblock %}
