<!DOCTYPE html >
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href='{% static "pathways/bootstrap/css/bootstrap.min.css" %}'/>
    <link rel="stylesheet" href='{% static "pathways/css/graph.css" %}'/>
    <link rel="stylesheet" href='{% static "pathways/css/sankey.css" %}'/>
    <link rel="stylesheet" href='{% static "pathways/css/legend.css" %}'/>
    <link rel="stylesheet" href='{% static "pathways/project_core/js/d3-context-menu/css/d3-context-menu.css" %}'/>
    <link type="image/x-icon" href='{% static "pathways/project_core/images/icons/favicon.ico" %}' rel="shortcut icon"/>
    <script type="text/javascript"
            src='{% static "pathways/project_core/js/d3/d3.v4.js" %}'></script>
    <script type="text/javascript"
            src='{% static "pathways/project_core/js/d3/sankey.js" %}'></script>
    <script type="text/javascript"
            src='{% static "pathways/project_core/js/jquery_validate/jquery.validate.min.js" %}'></script>
    <script type="text/javascript"
            src='{% static "pathways/project_core/js/jquery/external/jquery_svg/jquery.svg.min.js" %}'></script>
    <script type="text/javascript"
            src='{% static "pathways/project_core/js/FileSaver.js/FileSaver.min.js" %}'></script>
    <script type="text/javascript"
            src='{% static "pathways/project_core/js/graph_controller/graph_controller.js" %}'></script>
    <script type="text/javascript"
            src='{% static "pathways/project_core/js/d3-context-menu/js/d3-context-menu.js" %}'></script>
</head>
<body>
<div class="container"><!-- /.container-fluid -->
    <div class="col-lg-12 graph-controller"><!-- /.graph-controls -->
        <nav class="navbar navbar-default">
            <div class="container">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav">
                        <!-- Nodes - Edges - Funcionalities - Export - Legend -->
                        <li class="controls dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" role="button">Nodes<span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu controls-lower-case">
                                <div>
                                    <button type="button" id="mapped-nodes-button" class="btn btn-info">Click to
                                        show
                                        data-mapped nodes
                                    </button>
                                    <div class="input-group">
                                        <span class="input-group-addon" id="sizing-addon"><i
                                                class="fa fa-connectdevelop fa-0.5x"></i></span>
                                        <input placeholder="Node finder (click to show)" id="node-search"
                                               class="wide form-control"
                                               aria-describedby="sizing-addon1" type="text"/>
                                    </div>
                                </div>
                                <div id="node-list">
                                </div>
                            </ul>
                        </li>
                        <li class="controls dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" role="button">Edges<span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu controls-lower-case">
                                <div>
                                    <div class="input-group">
                                        <span class="input-group-addon" id="sizing-addon"><i
                                                class="fa fa-connectdevelop fa-0.5x"></i></span>
                                        <input placeholder="Edge finder (click to show)" id="edge-search"
                                               class="form-control"
                                               aria-describedby="sizing-addon1" type="text"/>
                                    </div>
                                </div>
                                <div id="edge-list">
                                </div>
                            </ul>
                        </li>
                        <li class="controls"><a data-toggle="modal" data-target="#info-graph">Functionalities</a>
                        <li class="dropdown">
                            <a class="dropdown-toggle controls" data-toggle="dropdown" role="button">Export Graph<span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu controls">
                                <li class="align_left"><a href="pathways/graph/get_graph_bel/{{ pks }}"
                                                          download="graph.bel"
                                >BEL File <img id="bel-logo" alt="BEL-logo"
                                               src="{% static "pathways/project_core/images/icons/bel300x.png" %}"></a>
                                </li>
                                <li class="align_left"><a href="pathways/graph/get_json_pks/{{ pks }}"
                                                          download="graph.json"
                                >Export JSON <img id="json-logo" alt="JSON-logo"
                                                  src="{% static "pathways/project_core/images/icons/json-icon.png" %}"></a>
                                </li>
                                <li class="align_left"><a id="save-svg-graph">Save image <i class="fa fa-file-image-o"
                                ></i></a></li>
                            </ul>
                        </li>

                        <li class="controls"><a data-toggle="modal" data-target="#legend">Legend</a>
                        </li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>
    </div><!-- /.graph-controls -->

    <div class="container align_row">
        <div class="col-md-12">
            <h2 class="title text-center"> Network </h2>
            <!-- / Force -->
            <div id="graph-chart">
            </div>
            <!-- /.Force -->
            <!-- / Sankey -->
            <div id="sankey">
            </div>
            <!-- /.Sankey -->
        </div>
    </div>
</div><!-- /.container-fluid -->

<div id="info-graph" class="modal fade"><!-- /.info-graph Modal -->
    <div class="modal-dialog"><!-- /.Modal dialog -->
        <div class="modal-content"><!-- /.Modal content -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    Ã—
                </button>
                <h4 class="modal-title">Functionalities and info</h4>
            </div>

            <div class="modal-body text-left"><!-- /.Modal body -->

                <h4>Subgraph info</h4>


                <h5 class="text-left"><span class="color_red">Selection </span> Network</h5>
                <hr>
                <h4>Search functionalities</h4>
                <div>
                    <p class="color_red text-left">Shortest path between two nodes
                    </p>
                    <form id="shortest-path-form" method="get">

                        <label>
                            <input class="text-left" type="checkbox" name="visualization-options" value="hide">
                            Hide other nodes
                        </label>
                        <div class="input-group">
                        <span class="input-group-addon" id="sizing-addon"><i class="fa fa-arrow-circle-o-right"
                                                                             aria-hidden="true"></i></span>
                            <input placeholder="Source node" name="source" id="source-node" class="text-left"
                                   aria-describedby="sizing-addon1" type="text"/>

                        </div>
                        <div class="input-group">
                        <span class="input-group-addon" id="sizing-addon"><i class="fa fa-paper-plane-o"
                                                                             aria-hidden="true"></i></span>
                            <input placeholder="Target node" name="target" id="target-node" class="text-left"
                                   aria-describedby="sizing-addon1" type="text"/>
                        </div>

                    </form>
                    <div class="buttons">
                        <input type="button" class="button-shortest-path" id="show-network-input" value="Show"/>
                        <input type="button" class="button-shortest-path" id="get-shortest-path-bel-input"
                               value="Extract to BEL"/>
                    </div>
                </div>
                <div>
                    <p class="color_red text-left">All chains of causations (mechanisms) between two nodes
                    </p>
                    <form id="all-paths-form" method="get">
                        <label>
                            <input class="text-left" type="checkbox" name="visualization-options" value="hide">
                            Hide other nodes
                        </label>
                        <div class="input-group">
                        <span class="input-group-addon" id="sizing-addon"><i class="fa fa-arrow-circle-o-right"
                                                                             aria-hidden="true"></i></span>
                            <input placeholder="Source node" name="source" id="source-node2" class="text-left"
                                   aria-describedby="sizing-addon1" type="text"/>
                        </div>
                        <div class="input-group">
                        <span class="input-group-addon" id="sizing-addon"><i class="fa fa-paper-plane-o"
                                                                             aria-hidden="true"></i></span>
                            <input placeholder="Target node" name="target" id="target-node2" class="text-left"
                                   aria-describedby="sizing-addon1" type="text"/>
                        </div>
                    </form>
                    <div class="buttons">
                        <input type="button" class="button-all-paths" id="all-paths-show-input" value="Show"/>
                        <input type="button" class="button-all-paths" id="get-all-paths-bel-input"
                               value="Extract to BEL"/>
                    </div>
                </div>
                <div>
                    <p class="color_red text-left">Extract network with list of nodes</p>
                    <form id="export-gml" action="pathways/graph/subnetwork_to_gml/" method="get">
                        <input type="hidden" name="expand_nodes[]" id="expand_nodes[]" value="">
                        <input type="hidden" name="delete_nodes[]" id="delete_nodes[]" value="">
                        <input type="hidden" name="pks" id="pks" value="">

                        <input placeholder="Please select all nodes in the subnetwork" name="export-node-list"
                               id="export-node-list"
                               type="text"/>
                        <input type="submit" id="export-to-gml"
                               value="Export to GraphML"/>
                    </form>
                </div>
                <hr>
                <div class="text-center">
                    <button type="button" id="hide_node_names" class="btn btn-info">Hide BEL names
                    </button>
                    <button type="button" id="restore_node_names" class="btn btn-info">Restore BEL names
                    </button>
                    <button type="button" id="restore" class="btn btn-info">Restore ALL
                    </button>
                </div>
                <h4>Network Visualization Info</h4>
                <div class="table-wrapper">
                    <table class="table table-responsive">
                        <thead>
                        <tr>
                            <th><b>Function</b></th>
                            <th><b>Action</b></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Expand/Delete node from the network</td>
                            <td>Right click on node</td>
                        </tr>
                        <tr>
                            <td>Freeze graph</td>
                            <td>Press Space</td>
                        </tr>
                        <tr>
                            <td>Pin a node down (fix it)</td>
                            <td>Drag the node to the desire position</td>
                        </tr>
                        <tr>
                            <td>Release node (unfix it)</td>
                            <td>Doubleclick on the node</td>
                        </tr>
                        <tr>
                            <td>Highlight node and its neighbourhood</td>
                            <td>Mouseover node</td>
                        </tr>
                        <tr>
                            <td>Zooming</td>
                            <td>Zooming buttons</td>
                        </tr>
                        <tr>
                            <td>Panning</td>
                            <td>Mouse click and drag</td>
                        </tr>
                        <tr>
                            <td>Undo changes</td>
                            <td>Double click in the graph</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <hr>
                <h4>Paths Visualization Info (Sankey Diagram)</h4>
                <div class="table-wrapper">
                    <table class="table table-responsive">
                        <thead>
                        <tr>
                            <th><b>Function</b></th>
                            <th><b>Action</b></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>See all connections of node via paths</td>
                            <td>Click on node</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div><!-- /.Modal body -->

            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">
                    Close
                </button>
            </div>

        </div><!-- /.Modal content -->
    </div><!-- /.Modal dialog -->
</div><!-- /.info-graph Modal -->

<div aria-hidden="true" style="display: none;" id="legend" class="modal fade"><!-- /.Legend Modal -->
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h4 class="modal-title">Legend</h4>
            </div>
            <!-- .modal-header -->

            <div class="modal-body">
                <div id="accordion" class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <a class="collapsed" data-toggle="collapse" data-parent="#accordion"
                               data-target="#nodes-legend">
                                Nodes
                            </a>
                        </div>
                        <!-- .panel-heading -->

                        <div style="height: 0;" id="nodes-legend" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="table-wrapper">
                                    <table class="table table-responsive">
                                        <thead>
                                        <tr>
                                            <th>Functions</th>
                                            <th>Symbol</th>
                                            <th>Description</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="col-md-2">p(A)</td>
                                            <td class="col-md-1">
                                                <div class="legend-circle-protein"></div>
                                            </td>
                                            <td>Abundance of protein A</td>
                                        </tr>

                                        <tr>
                                            <td>a(A)</td>
                                            <td>
                                                <div class="legend-circle-abundance"></div>
                                            </td>
                                            <td>Abundance of chemical A (or other non-gene, RNA, protein abundances)
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>r(A)</td>
                                            <td>
                                                <div class="legend-circle-m-rna"></div>
                                            </td>
                                            <td>Abundance of mRNA A</td>
                                        </tr>
                                        <tr>
                                            <td>m(A)</td>
                                            <td>
                                                <div class="legend-circle-micro-rna"></div>
                                            </td>
                                            <td>Abundance of microRNA A</td>
                                        </tr>
                                        <tr>
                                            <td>g(A)</td>
                                            <td>
                                                <div class="legend-circle-gene"></div>
                                            </td>
                                            <td>Abundance of gene A</td>
                                        </tr>
                                        <tr>
                                            <td>composite()</td>
                                            <td>
                                                <div class="legend-circle-composite"></div>
                                            </td>
                                            <td>Multiple entity abundances synergize to produce an effect but are
                                                not
                                                known to be bound into a complex
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>complex()</td>
                                            <td>
                                                <div class="legend-circle-complex"></div>
                                            </td>
                                            <td>Multiple entity abundances are bound into a complex</td>
                                        </tr>
                                        <tr>
                                            <td>path()</td>
                                            <td>
                                                <div class="legend-circle-pathology"></div>
                                            </td>
                                            <td>Disease or pathology process</td>
                                        </tr>
                                        <tr>
                                            <td>degradation(A)</td>
                                            <td>
                                                <div class="legend-circle-degradation"></div>
                                            </td>
                                            <td>Degradation of A</td>
                                        </tr>
                                        <tr>
                                            <td>bp()</td>
                                            <td>
                                                <div class="legend-circle-bioprocess"></div>
                                            </td>
                                            <td>Biological process</td>
                                        </tr>
                                        <tr>
                                            <td>reaction(reactants(A), products(B))</td>
                                            <td>
                                                <div class="legend-circle-reaction"></div>
                                            </td>
                                            <td>Transformation of reactants to products</td>
                                        </tr>

                                        <tr>
                                            <td>tloc(A, X, Y)</td>
                                            <td>
                                                <div class="legend-circle-translocation"></div>
                                            </td>
                                            <td>Translocation of A from X to Y</td>
                                        </tr>
                                        <tr>
                                            <td>sec(A)</td>
                                            <td>
                                                <div class="legend-circle-secretion"></div>
                                            </td>
                                            <td>Secretion of A from intracellular to extracellular</td>
                                        </tr>
                                        <tr>
                                            <td>molecularActivity(A)</td>
                                            <td>
                                                <div class="legend-circle-mol-activity"></div>
                                            </td>
                                            <td>Molecular activity of A where mechanism is unknown</td>
                                        </tr>
                                        <tr>
                                            <td>cat(A)</td>
                                            <td>
                                                <div class="legend-circle-catalytic"></div>
                                            </td>
                                            <td>Catalytic activity of A</td>
                                        </tr>
                                        <tr>
                                            <td>chap(A)</td>
                                            <td>
                                                <div class="legend-circle-chaperone"></div>
                                            </td>
                                            <td>Chaperone activity of A</td>
                                        </tr>
                                        <tr>
                                            <td>list(A,B,C)</td>
                                            <td>
                                                <div class="legend-circle-list"></div>
                                            </td>
                                            <td>List of abundances A,B and C</td>
                                        </tr>
                                        <tr>
                                            <td>pep(A)</td>
                                            <td>
                                                <div class="legend-circle-peptidase"></div>
                                            </td>
                                            <td>Peptidase activity of A</td>
                                        </tr>
                                        <tr>
                                            <td>kin(A)</td>
                                            <td>
                                                <div class="legend-circle-kinase"></div>
                                            </td>
                                            <td>Kinase activity of A</td>
                                        </tr>
                                        <tr>
                                            <td>surf(A)</td>
                                            <td>
                                                <div class="legend-circle-surface"></div>
                                            </td>
                                            <td>Movement of A to cell surface</td>
                                        </tr>
                                        <tr>
                                            <td>phos()</td>
                                            <td>
                                                <div class="legend-circle-phosphatase"></div>
                                            </td>
                                            <td>Phosphatase activity of A</td>
                                        </tr>
                                        <tr>
                                            <td>tscript(A)</td>
                                            <td>
                                                <div class="legend-circle-transcriptional"></div>
                                            </td>
                                            <td>Transcriptional activity of A</td>
                                        </tr>
                                        <tr>
                                            <td>gtp(A)</td>
                                            <td>
                                                <div class="legend-circle-gtp"></div>
                                            </td>
                                            <td>Gtp bound activity of A</td>
                                        </tr>
                                        <tr>
                                            <td>tport(A)</td>
                                            <td>
                                                <div class="legend-circle-transport"></div>
                                            </td>
                                            <td>Transport activity of A</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <!-- .table -->
                                </div>
                                <!-- .table-wrapper -->
                            </div>
                            <!-- .panel-body -->
                        </div>
                        <!-- #nodes-legend.panel-collapse -->
                    </div>
                    <!-- .panel.panel-default -->

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <a data-toggle="collapse" data-parent="#accordion" data-target="#edges-legend">
                                Edges
                            </a>
                        </div>
                        <!-- .panel-heading -->

                        <div style="height: auto;" id="edges-legend" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <div class="table-wrapper">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Relationship</th>
                                            <th>Line Style</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="bigger-rows">decreases</td>
                                            <td class="bigger-rows">
                                                <hr class="legend-continuous-line" width="30%"/>
                                                <span class="after-hr">&#124;</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="bigger-rows">directlyDecreases</td>
                                            <td class="bigger-rows">
                                                <hr class="legend-continuous-line" width="30%"/>
                                                <span class="after-hr">&#124;</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="bigger-rows">increases</td>
                                            <td class="bigger-rows">
                                                <hr class="legend-continuous-line" width="30%"/>
                                                <span class="after-hr">&#9658;</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="bigger-rows">directlyIncreases</td>
                                            <td class="bigger-rows">
                                                <hr class="legend-continuous-line" width="30%"/>
                                                <span class="after-hr">&#9658;</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>negativeCorrelation</td>
                                            <td>
                                                <hr class="legend-continuous-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>positiveCorrelation</td>
                                            <td>
                                                <hr class="legend-continuous-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>causesNoChange</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>association</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>orthologous</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>transcribedTo</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>translatedTo</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>biomarkerFor</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>hasMember</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>hasComponent</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>isA</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>prognosticBiomarkerFor</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>rateLimitingStepOf</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>subProcessOf</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>actsIn</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>hasProduct</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>hasVariant</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>hasModification</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>reactantIn</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>translocates</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>includes</td>
                                            <td>
                                                <hr class="legend-dashed-line" width="30%"/>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <!-- .table -->
                                </div>
                                <!-- .table-wrapper -->
                            </div>
                            <!-- .panel-body -->
                        </div>
                        <!-- #edges-legend.panel-collapse.collapse -->
                    </div>
                    <!-- .panel.panel-default -->
                </div>
                <!-- #accordian.panel-group -->
            </div>
            <!-- .modal-body -->

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    Close
                </button>
            </div>
            <!-- .modal-footer -->
        </div>
        <!-- .modal-content -->
    </div>
    <!-- .modal-dialog -->
</div><!-- .Legend Modal -->
</body>
</html>